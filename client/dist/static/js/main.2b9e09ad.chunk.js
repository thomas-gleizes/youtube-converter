(this.webpackJsonpextension=this.webpackJsonpextension||[]).push([[0],{170:function(e,t,n){},171:function(e,t,n){},172:function(e,t,n){"use strict";n.r(t);var c=n(1),s=n.n(c),a=n(88),r=n.n(a),i=n(2),o=n(92),l=(n(151),n(0)),d=function(){return Object(l.jsx)("header",{className:"px-3 py-2 rounded-b-lg bg-gray-200 shadow",children:Object(l.jsxs)("div",{className:"flex justify-between",children:[Object(l.jsx)("h1",{className:"text-md text-xl text-blue-700 font-bold",children:"Youtube-converter"}),Object(l.jsx)("div",{className:"text-xs opacity-60 text-opacity-70 mt-2",children:"v2.1.1"})]})})},u=function(){var e=Object(c.useContext)(B),t=Object(i.a)(e,3),n=t[0],s=t[1],a=t[2],r=function(e){var t=e.route;return Object(l.jsx)("div",{onClick:function(){return s(t)},className:"cursor-pointer text-center ".concat(n===t&&"border-b-2 border-white"),children:t.libelle})};return Object(l.jsx)("footer",{className:"bg-gradient-to-bl from-blue-900 to-gray-900 text-white py-2 rounded-t-md",children:Object(l.jsx)("nav",{className:"flex justify-evenly",children:a.map((function(e){return Object(l.jsx)(r,{route:e},e.id)}))})})},b=n(11),j=n.n(b),m=n(23),x=n(6),h=n(94),O=n(17),f=["color","loading","onClick","children"],v=function(e){var t=e.color,n=e.loading,s=e.onClick,a=e.children,r=Object(h.a)(e,f),i=Object(c.useMemo)((function(){return n?"bg-gradient-to-bl from-gray-300 to-gray-400 shadow":"bg-gradient-to-bl from-".concat(t,"-600 to-").concat(t,"-900 shadow hover:shadow-xl transform transition duration-75 hover:scale-105")}),[t,n]);return Object(l.jsx)("button",Object(x.a)(Object(x.a)({},r),{},{onClick:s,disabled:n,className:"".concat(i," rounded text-white text-center text-lg w-full py-1"),children:n?Object(l.jsxs)("span",{className:"flex justify-center w-full",children:["Chargement",Object(l.jsx)("i",{className:"my-auto ml-3",children:Object(l.jsx)(O.c,{size:20,className:"animate-spin"})})]}):Object(l.jsx)(l.Fragment,{children:a})}))};v.defaultProps={color:"blue",loading:!1};var p=v,g=function(){var e=Object(c.useState)(null),t=Object(i.a)(e,2),n=t[0],s=t[1],a=Object(c.useState)(null),r=Object(i.a)(a,2),o=r[0],d=r[1],u=Object(c.useState)(!1),b=Object(i.a)(u,2),x=b[0],h=b[1];Object(c.useEffect)((function(){chrome.tabs?chrome.tabs.query({active:!0,lastFocusedWindow:!0},(function(e){s(new URL(e[0].url))})):s(new URL("https://www.youtube.com/watch?v=q783rNIwc70"))}),[]),Object(c.useEffect)((function(){if(n){var e=n.hostname,t=n.searchParams,c=n.pathname;"www.youtube.com"===e&&"/watch"===c&&t.get("v")?d(t.get("v")):d(null)}else d(null)}),[n]);var O=function(){var e=Object(m.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:h(!0),console.log("id",o),chrome.tabs.query({active:!0,lastFocusedWindow:!0},(function(e){var t=e[0];chrome.tabs.sendMessage(t.id,{action:"download",videoId:o},(function(e){e.success&&h(!1)}))}));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(l.jsxs)("div",{className:"w-full py-2",children:[o&&Object(l.jsxs)("div",{className:"mb-3 mx-2 text-md",children:["Video id : ",Object(l.jsx)("span",{children:o})]}),Object(l.jsx)("div",{className:"text-center mx-3",children:o?Object(l.jsx)(p,{loading:x,onClick:O,color:"blue",children:"Convertir"}):Object(l.jsx)("h2",{className:"text-lg text-yellow-500 text-center my-2 font-semibold",children:"Aucun video d\xe9t\xe9cter"})})]})},y=(n(93),n(1).useState),w=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=y(e),n=Object(i.a)(t,2),c=n[0],s=n[1],a=function(){return s(!c)};return[c,a]},N=n(10),C=function(e){var t=e.size,n=e.className;return Object(l.jsx)(O.c,{size:t,className:"animate-spin mx-auto ".concat(n)})};C.prototype={size:n.n(N).a.number},C.defaultProps={size:20,className:"my-4"};var k=C,S=n(90),E=function(e){var t=e.title,n=e.children,c=e.defaultOpen,s=w(c),a=Object(i.a)(s,2),r=a[0],o=a[1];return Object(l.jsxs)("div",{className:"border mb-2 rounded-lg shadow-md",children:[Object(l.jsxs)("div",{className:"px-2 py-1 flex justify-between",children:[Object(l.jsx)("h2",{className:"text-lg",children:t}),Object(l.jsx)("button",{onClick:o,className:"transition transform hover:text-blue-700 hover:scale-105 duration-150 p-1.5",children:r?Object(l.jsx)(O.a,{}):Object(l.jsx)(O.b,{})})]}),Object(l.jsx)(S.a,{show:r,enter:"transition transform duration-1000",enterFrom:"opacity-0 -translate-y-10",enterTo:"opacity-100 translate-y-0",leave:"transition-opacity duration-400",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:Object(l.jsx)("div",{className:"border-t bg-white",children:n})})]})};E.defaultProps={defaultOpen:!0};var F=E,M=function(e){var t,n=e.video;return Object(l.jsx)(F,{title:"Metadata",children:Object(l.jsxs)("ul",{className:"text-xs p-2",children:[Object(l.jsxs)("li",{children:[Object(l.jsx)("span",{className:"font-semibold text-gray-800",children:"YouTube id : "}),n.id]}),Object(l.jsxs)("li",{className:"truncate",children:[Object(l.jsx)("span",{className:"font-semibold text-gray-800",children:" Titre : "}),n.title]}),Object(l.jsxs)("li",{children:[Object(l.jsx)("span",{className:"font-semibold text-gray-800",children:"Auteur : "})," ",null===(t=n.author)||void 0===t?void 0:t.name]}),Object(l.jsxs)("li",{className:"flex justify-between",children:[Object(l.jsxs)("span",{children:[Object(l.jsx)("span",{className:"font-semibold text-gray-800",children:"Dur\xe9e : "}),Object(l.jsxs)("span",{className:n.lengthSeconds>480?"text-red-600":"",children:[n.lengthSeconds,"s"]})]}),Object(l.jsx)("span",{className:"text-xs opacity-30",children:"max: 480s"})]})]})})},q=function(e){var t,n,s=e.video,a=Object(c.useContext)(A),r=Object(i.a)(a,2),o=r[0],d=r[1],u=Object(c.useState)(null),b=Object(i.a)(u,2),j=b[0],m=b[1];return Object(c.useEffect)((function(){return s.thumbnails&&m(s.thumbnails[s.thumbnails.length-1])}),[s.thumbnails]),Object(c.useEffect)((function(){var e;return d(Object(x.a)(Object(x.a)({},o),{},{cover:null===(e=s.thumbnails)||void 0===e?void 0:e.findIndex((function(e){return e===j}))}))}),[j]),Object(l.jsx)(F,{title:"Couverture",defaultOpen:!1,children:Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)("div",{className:"py-1",children:s.thumbnails&&Object(l.jsx)("img",{width:130,className:"mx-auto shadow",src:null===(t=s.thumbnails[s.thumbnails.length-1])||void 0===t?void 0:t.url,alt:"cover"})}),Object(l.jsx)("div",{className:"grid grid-cols-2 px-0.5 py-1",children:null===(n=s.thumbnails)||void 0===n?void 0:n.map((function(e,t){return Object(l.jsx)("div",{className:"my-0.5 w-11/12 mx-auto",children:Object(l.jsxs)("button",{onClick:function(){return m(e)},className:"border w-full rounded text-sm shadow-sm transform transform hover:scale-105 hover:shadow-md duration-75 ".concat(j===e?"text-white bg-gradient-to-bl from-blue-600 to-blue-800":"bg-gray-100"),children:[null===e||void 0===e?void 0:e.width,"x",null===e||void 0===e?void 0:e.height]})},t)}))})]})})},I=n(91),P=n.n(I),T=(n(169),function(e){return Object(l.jsx)(P.a,Object(x.a)({},e))}),z=480,D=function(e){var t=e.video,n=parseInt(t.lengthSeconds)||10,s=Object(c.useState)({min:0,max:n}),a=Object(i.a)(s,2),r=a[0],o=a[1],d=Object(c.useState)(n>z),u=Object(i.a)(d,2),b=u[0],j=u[1],m=Object(c.useContext)(A),h=Object(i.a)(m,2),O=h[0],f=h[1];Object(c.useEffect)((function(){return o({min:0,max:n})}),[n]),Object(c.useEffect)((function(){return j(r.max-r.min>z)}),[r,n]),Object(c.useEffect)((function(){var e=document.querySelector(".input-range__track--active");r.max-r.min>z?e.style.backgroundColor="#DC2626":e.style.backgroundColor="#10B981"}),[b]),Object(c.useEffect)((function(){return f(Object(x.a)(Object(x.a)({},O),{},{begin:r.min,end:r.max}))}),[r]);var v=Object(c.useMemo)((function(){return r.max-r.min-z}),[r]);return Object(l.jsxs)(F,{title:"Timeline",defaultOpen:!0,children:[Object(l.jsxs)("ul",{className:"text-xs p-2",children:[Object(l.jsxs)("li",{children:[Object(l.jsx)("span",{className:"font-semibold text-gray-800",children:"Dur\xe9e : "}),Object(l.jsxs)("span",{className:b?"text-red-600":"",children:[r.max-r.min," secondes"]})]}),Object(l.jsxs)("li",{children:[Object(l.jsx)("span",{className:"font-semibold text-gray-800",children:"Max : "}),z," secondes"]}),Object(l.jsxs)("li",{children:[Object(l.jsx)("span",{className:"font-semibold text-gray-800",children:"Delta : "}),Object(l.jsxs)("span",{className:b?"text-red-600":"text-green-600",children:[v>0?"+".concat(v):v," secondes"]})]})]}),Object(l.jsx)("div",{className:"p-6",children:Object(l.jsx)(T,{minValue:0,maxValue:n,formatLabel:function(e){return"".concat(parseInt(e/60),":").concat(e%60>=10?e%60:"0".concat(e%60))},value:r,onChange:function(e){return o(e)}})})]})},R="ready",W="waiting",L="error",U="null",A=Object(c.createContext)({}),V=function(){var e=Object(c.useState)({}),t=Object(i.a)(e,2),n=t[0],s=t[1],a=Object(c.useState)(W),r=Object(i.a)(a,2),o=r[0],d=r[1],u=Object(c.useState)(!1),b=Object(i.a)(u,2),h=b[0],O=b[1],f=Object(c.useState)({}),v=w(),g=Object(i.a)(v,2),y=g[0],N=g[1];Object(c.useEffect)((function e(){var t,n;(null===(t=chrome)||void 0===t||null===(n=t.tabs)||void 0===n?void 0:n.query)&&chrome.tabs.query({active:!0,lastFocusedWindow:!0},(function(t){var n=new URL(t[0].url),c=n.hostname,a=n.pathname,r=n.searchParams;"www.youtube.com"===c&&"/watch"===a&&r.get("v")?chrome.tabs.sendMessage(t[0].id,{action:"ask"},(function(t){var n=null===t||void 0===t?void 0:t.status;if(n===R){var c=t.videoDetails,a=t.videoId;s(Object(x.a)({id:a},c)),d(t.status)}else n===L||n===U?d(t.status):setTimeout(e,300)})):d(U)}))}),[y]);var C=function(){var e=Object(m.a)(j.a.mark((function e(){var t,c,s;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(O(!0),t=Object(i.a)(f,1),c=t[0],s=n.id,!chrome.tabs){e.next=7;break}chrome.tabs.query({active:!0,lastFocusedWindow:!0},(function(e){return chrome.tabs.sendMessage(e[0].id,{action:"download2",videoId:s,params:c},(function(e){e.success&&O(!1)}))})),e.next=10;break;case 7:return e.next=9,new Promise((function(e){return setTimeout(e,4e3)}));case 9:O(!1);case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(l.jsx)(l.Fragment,{children:o===R?Object(l.jsx)(A.Provider,{value:f,children:Object(l.jsxs)("div",{className:"p-2",children:[Object(l.jsx)(M,{video:n}),Object(l.jsx)(q,{video:n}),Object(l.jsx)(D,{video:n}),Object(l.jsx)("div",{className:"mt-2",children:Object(l.jsx)(p,{onClick:C,loading:h,children:"Convertir"})})]})}):"loading"===o||o===W?Object(l.jsx)(k,{size:30,className:"my-4 text-blue-600"}):o===U?Object(l.jsx)("div",{children:Object(l.jsx)("h2",{className:"text-lg text-yellow-500 text-center my-2 font-semibold",children:"Aucun video d\xe9tecter"})}):o===L?Object(l.jsxs)("div",{children:[Object(l.jsx)("h2",{className:"text-lg text-red-500 text-center my-2 font-semibold",children:"Une erreur est survenue"}),Object(l.jsx)("div",{className:"w-10/12 mx-auto my-2",children:Object(l.jsx)("button",{onClick:function(){var e;(null===(e=chrome)||void 0===e?void 0:e.tabs)&&chrome.tabs.query({active:!0,lastFocusedWindow:!0},(function(e){return chrome.tabs.sendMessage(e[0].id,{action:"reload"})})),d(W),setTimeout(N,3e3)},className:"rounded text-white text-center text-lg w-full py-1 bg-gradient-to-br from-yellow-600 to-yellow-400 shadow hover:shadow-xl transform transition duration-75 hover:scale-105",children:"Recharger"})})]}):null})},B=Object(c.createContext)({}),H=[{id:0,libelle:"Rapide",Component:g},{id:1,libelle:"Detailer",Component:V}],J=function(){var e=Object(c.useState)(H[1]),t=Object(i.a)(e,2),n=t[0],s=t[1],a=Object(c.useMemo)((function(){return n.Component}),[n]);return Object(l.jsx)(B.Provider,{value:[n,s,H],children:Object(l.jsxs)("div",{style:{maxHeight:"600px"},className:"w-full bg-white border-2 border-gray-900",children:[Object(l.jsx)(d,{}),Object(l.jsx)("main",{children:Object(l.jsx)(o.a,{style:{maxHeight:"512px"},children:Object(l.jsx)("div",{className:"pr-1",children:Object(l.jsx)(a,{})})})}),Object(l.jsx)(u,{})]})})};n(170),n(171);r.a.render(Object(l.jsx)(s.a.StrictMode,{children:Object(l.jsx)(J,{})}),document.getElementById("root"))}},[[172,1,2]]]);